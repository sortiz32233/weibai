var Manager={init:function(){this.bind()},bind:function(){var a=this;$(document).on("click",".Jdelete",function(){var e=$(this);Modal.confirm({id:"Jconfirm",content:"确定要删除该用户？",callback:function(){App.blockUI($("#Jconfirm")),a.deleteUser(e.data("id"))}})}).on("click",".Jreset",function(){var e=$(this);Modal.confirm({id:"Jconfirm",content:"确定要重置该用户的密码？",callback:function(){App.blockUI($("#Jconfirm")),a.resetPassword(e.data("id"))}})}).on("click","#Jadd",function(){Modal.template({id:"Jtemplate",title:"添加用户",content:a._template({iType:0,managerId:"",sName:"",sTrueName:""}),callback:function(){App.blockUI($("#Jtemplate")),a.handleUser()}})}).on("click",".Jedit",function(){var e=$(this);Modal.template({id:"Jtemplate",title:"修改用户信息",content:a._template({iType:1,managerId:e.data("id"),sName:e.data("name"),sTrueName:e.data("truename")}),callback:function(){App.blockUI($("#Jtemplate")),a.handleUser()}})})},postData:function(a){try{$.ajax({url:a.url||"",data:a.data,type:a.type||"get",dataType:"json",success:function(e){a.callback(e)},error:function(a){console.error("异常....")},complete:function(){App.unblockUI(a.hObject)}})}catch(a){console.error(a)}},handleUser:function(){this.postData({url:"/manager/action",type:"post",data:$("#Juserform").serialize(),hObject:$("#Jtemplate"),callback:function(a){"success"==a.status?Modal.alert({id:"Jalert",content:a.msg,type:"success",callback:function(){window.location.reload()}}):Modal.alert({id:"Jalert",type:"error",content:a.msg,callback:function(){}})}})},deleteUser:function(a){this.postData({url:"/manager/delete",type:"post",data:{managerId:a,json:1},hObject:$("#Jconfirm"),callback:function(a){"success"==a.status?Modal.alert({id:"Jalert",content:a.msg,type:"success",callback:function(){window.location.reload()}}):Modal.alert({id:"Jalert",type:"error",content:a.msg,callback:function(){}})}})},resetPassword:function(a){this.postData({url:"/manager/resetpassword",type:"post",data:{managerId:a,json:1},hObject:$("#Jconfirm"),callback:function(a){"success"==a.status?Modal.alert({id:"Jalert",content:a.msg,type:"success",callback:function(){}}):Modal.alert({id:"Jalert",type:"error",content:a.msg,callback:function(){}})}})},_template:function(a){return'<form id="Juserform" action="#" class="form-horizontal">                        <input type="hidden" name="isEdit" value="'+a.iType+'" />                        <input type="hidden" name="json" value="1" />                        <input type="hidden" name="managerId" value="'+a.managerId+'" />                        <div class="control-group">                            <label class="control-label">用户名：</label>                            <div class="controls">                                <input id="JmanagerName" name="managerName" type="text" class="span6 m-wrap" palaceholder="请输入用户名" value="'+a.sName+'"/>                            </div>                        </div>                        <div class="control-group">                            <label class="control-label">真是姓名：</label>                            <div class="controls">                                <input id="JtrueName" name="trueName" type="text" class="span6 m-wrap" palaceholder="请输入真实姓名" value="'+a.sTrueName+'"/>                            </div>                        </div>                        <div class="control-group">                            <label class="control-label">密码：</label>                            <div class="controls">                                <input id="Jpassword" name="password" type="password" class="span6 m-wrap" palaceholder="请输入密码" />                            </div>                        </div>                        <div class="control-group">                            <label class="control-label">确认密码：</label>                            <div class="controls">                                <input id="JpasswordAgain" type="password" class="span6 m-wrap" palaceholder="请再次输入密码" />                            </div>                        </div>                    </form>'}};$(function(){Manager.init()});